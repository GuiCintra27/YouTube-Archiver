# YT-Archiver Backend Configuration
# Copy this file to .env and modify as needed
# All settings are optional - defaults are shown below

# =============================================================================
# Application Settings
# =============================================================================

# Application name (displayed in API docs)
# APP_NAME=YT-Archiver API

# Application version
# APP_VERSION=2.0.0

# =============================================================================
# Server Settings
# =============================================================================

# Host to bind the server to
# HOST=0.0.0.0

# Port to run the server on
# PORT=8000

# =============================================================================
# Logging
# =============================================================================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
# Use DEBUG for development, INFO or WARNING for production
LOG_LEVEL=INFO

# =============================================================================
# CORS (Cross-Origin Resource Sharing)
# =============================================================================

# Allowed origins for CORS (comma-separated)
# Add your frontend URL here if running on a different port/domain
CORS_ORIGINS=http://localhost:3000,http://localhost:3001

# =============================================================================
# File Paths
# =============================================================================

# Directory where downloaded videos are stored
DOWNLOADS_DIR=./downloads

# File to track already downloaded videos (prevents duplicates)
ARCHIVE_FILE=./archive.txt

# =============================================================================
# Google Drive Integration
# =============================================================================

# Path to Google OAuth credentials file
# Download from Google Cloud Console
DRIVE_CREDENTIALS_PATH=./credentials.json

# Path where OAuth token will be stored after authentication
DRIVE_TOKEN_PATH=./token.json

# Name of the root folder in Google Drive
DRIVE_ROOT_FOLDER=YouTube Archiver

# =============================================================================
# Download Defaults
# =============================================================================

# Default maximum video resolution (height in pixels)
# Common values: 720, 1080, 1440, 2160
DEFAULT_MAX_RESOLUTION=1080

# Default number of concurrent fragment downloads
# Higher values = faster downloads but more bandwidth
DEFAULT_CONCURRENT_FRAGMENTS=10

# =============================================================================
# Job Management
# =============================================================================

# Hours after which completed jobs are automatically cleaned up
JOB_EXPIRY_HOURS=24

# Worker role: api | worker | both
# WORKER_ROLE=both

# Jobs store backend: memory | redis
# JOB_STORE_BACKEND=memory

# Redis URL (used when JOB_STORE_BACKEND=redis)
# REDIS_URL=redis://localhost:6379/0

# Redis key prefix for job data
# REDIS_JOB_KEY_PREFIX=yt-archiver:job:

# Redis timeouts (seconds)
# REDIS_SOCKET_TIMEOUT=1.0
# REDIS_CONNECT_TIMEOUT=1.0

# =============================================================================
# Catalog (SQLite)
# =============================================================================

# Enable catalog-backed listings (local + drive snapshot)
# CATALOG_ENABLED=false

# Path to catalog SQLite DB (relative to backend/)
# CATALOG_DB_PATH=database.db

# Auto-publish Drive snapshot after Drive mutations
# CATALOG_DRIVE_AUTO_PUBLISH=true

# Require import before publish when snapshot exists
# CATALOG_DRIVE_REQUIRE_IMPORT_BEFORE_PUBLISH=true

# Allow legacy Drive listing fallback when catalog is empty
# CATALOG_DRIVE_ALLOW_LEGACY_LISTING_FALLBACK=false

# =============================================================================
# Blocking IO Concurrency (to_thread)
# =============================================================================

# Max concurrent blocking Drive operations
# BLOCKING_DRIVE_CONCURRENCY=3

# Max concurrent filesystem operations
# BLOCKING_FS_CONCURRENCY=2

# Max concurrent catalog (sqlite) operations
# BLOCKING_CATALOG_CONCURRENCY=4

# =============================================================================
# Drive Cache (Legacy/Optional)
# =============================================================================

# Enable Drive cache (SQLite)
# DRIVE_CACHE_ENABLED=true

# Path to Drive cache DB
# DRIVE_CACHE_DB_PATH=./drive_cache.db

# Interval between automatic Drive cache sync (minutes)
# DRIVE_CACHE_SYNC_INTERVAL=30

# Fallback to Drive API if cache fails
# DRIVE_CACHE_FALLBACK_TO_API=true
